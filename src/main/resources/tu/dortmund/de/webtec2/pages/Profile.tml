<html t:type="layout" title="Profil"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">
      
      
      <t:zone id="profile">
	      <t:if test="loadSuccess">
	      	<t:if test="currentUser">		      
		      <t:if test="!isFollowing">
		      			<button type="button" class="btn btn-primary" >
		      				<t:actionlink t:id="follow" context="profileUser.name" style="color:white;">Folgen</t:actionlink>
		      			</button>
		      	
		      	<p:else>
		      		<t:if test="!isOwnProfile">
		      			<button type="button" class="btn btn-primary" >
		      				<t:actionlink t:id="unfollow" context="profileUser.name" style="color:white;">Nicht mehr folgen</t:actionlink>
		      			</button>
		      		</t:if>
		      	</p:else>
		      </t:if>
		      <t:if test="!isFollower">
		      	<p><t:actionlink t:id="followMe" context="profileUser.name">Folg mir!</t:actionlink></p>
		      	<p:else>
		      		<t:if test="!isOwnProfile">
		      			<p>${profileUser.name} folgt Dir bereits, oder hat eine Einladung Dir zu folgen.</p>
		      		</t:if>
		      	</p:else>
		      </t:if>
		    </t:if>
		      	<p>Croaks</p>
		      	<ul style="list-style-type:none">
			      	<t:loop source="croaks" value="croak">
						<li>
							<blockquote>
								<p>${croak.text}</p>
								<footer>
										<t:pagelink page="profile" context="${croak.user.name}">
											${croak.user.name}
										</t:pagelink>
										<cite title="time">[${croak.timeStr}] </cite>
								</footer>
							</blockquote>
						</li>
					</t:loop>
				</ul>

		      	<t:if test="isOwnProfile">
		      		<p>Leute die Dir folgen</p>
		      		<p:else><h2>Leute die ${profileUser.name} folgen:</h2></p:else>
		      	</t:if>
		      	
		      	<div class="list-group">
		      		<t:loop source="followers" value="follower">
		      			<button type="button" class="list-group-item" style="width:200px">
		      				<t:pagelink page="profile" context="${follower.name}">
			      				${follower.name}
			      			</t:pagelink>
			      		</button>
			      	</t:loop>
				</div>
				
				
		      	<t:if test="isOwnProfile">
		      		<p>Leute denen Du folgst</p>
			      	<div class="list-group">
			      		<t:loop source="following" value="follower">
			      			<button type="button" class="list-group-item" style="width:200px">
				      			<t:pagelink page="profile" context="${follower.name}">
				      				${follower.name}
				      			</t:pagelink>
				      		</button>
				      	</t:loop>
			      	</div>
		      	</t:if>	

		      <p:else>Der Nutzer existiert nicht.</p:else>
	      </t:if>
	      
	      

      </t:zone>
</html>