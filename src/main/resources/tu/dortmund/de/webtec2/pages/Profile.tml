<html t:type="layout" title="Profil"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">
      
      <t:zone id="profile">
	      <t:if test="loadSuccess">
	      	<t:if test="currentUser">		      
		      <t:if test="!isFollowing">
		      	<p><t:actionlink t:id="follow" context="profileUser.name">Folgen</t:actionlink></p>
		      	<p:else>
		      		<t:if test="!isOwnProfile">
		      			<p><t:actionlink t:id="unfollow" context="profileUser.name">Nicht mehr folgen</t:actionlink></p>
		      		</t:if>
		      	</p:else>
		      </t:if>
		      <t:if test="!isFollower">
		      	<p><t:actionlink t:id="followMe" context="profileUser.name">Folg mir!</t:actionlink></p>
		      	<p:else>
		      		<t:if test="!isOwnProfile">
		      			<p>${profileUser.name} folgt Dir bereits, oder hat eine Einladung Dir zu folgen.</p>
		      		</t:if>
		      	</p:else>
		      </t:if>
		    </t:if>
		      	<p>Croaks</p>
		      	<ul>
			      	<t:loop source="croaks" value="croak">
						<li>
							[${croak.timeStr}] 
							<t:pagelink page="profile" context="${croak.user.name}">
								${croak.user.name}
							</t:pagelink>: 
							${croak.text}
						</li>
					</t:loop>
				</ul>

		      	<t:if test="isOwnProfile">
		      		<p>Leute die Dir folgen</p>
		      		<p:else>Leute die ${profileUser.name} folgen</p:else>
		      	</t:if>
		      	<ul>
		      		<t:loop source="followers" value="follower">
			      		<li>
			      			<t:pagelink page="profile" context="${follower.name}">
			      				${follower.name}
			      			</t:pagelink>
			      		</li>
			      	</t:loop>
		      	</ul>

		      	<t:if test="isOwnProfile">
		      		<p>Leute denen Du folgst</p>
			      	<ul>
			      		<t:loop source="following" value="follower">
				      		<li>
				      			<t:pagelink page="profile" context="${follower.name}">
				      				${follower.name}
				      			</t:pagelink>
				      		</li>
				      	</t:loop>
			      	</ul>
		      	</t:if>	

		      <p:else>Der Nutzer existiert nicht.</p:else>
	      </t:if>
	      
	      

      </t:zone>
</html>